#!/usr/bin/env node

var Onramp = require('../');

// Create the onramp instance at the localhost
var onramp = Onramp.create({hostname: '127.0.0.1'});

// Whenever a connection is established, tell it about all the 
// other connections available, and then broadcast it's connection
// identifier to the rest of the connections so everyone always
// knows who is connected to the onramp
onramp.on("connection", function(connection){
	onramp.connections.forEach(function(other){
		if(other === connection) return;
		
		connection.send('remote address', other.id);
		other.send('remote address', connection.id);
	});
});